<div class="detail-page" *ngIf="pokemon && species">
  <div class="page-section">
    <img class="pokemon-image" src="{{getImageURL('poke', pokemon.id)}}" alt="{{pokemon.name}}">
    <h2 class="card-title text-center"> {{(species.names | language)[0].name}} </h2>
    <div class="text-center"> #{{pokemon.id.toString().padStart(3, '0')}} {{(species.genera | language)[0].genus}} </div>
    <div class="text-center">
      <app-type-name
        *ngIf="pokemon.types | slot:1; let type"
        style="margin:4px"
        url="{{type.type.url}}"></app-type-name>
      <app-type-name
        *ngIf="pokemon.types | slot:2; let type"
        style="margin:4px"
        url="{{type.type.url}}"></app-type-name>
    </div>
  </div>

  <div class="info-box-collection">
    <div class="info-box">
      <div class="info-box-title">Abilities</div>
      <div class="info-box-content">
        <div class="info-box-content-item" (click)="goAbility(ability.ability)" *ngIf="pokemon.abilities | slot:1; let ability">
          <app-ability-name url="{{ability.ability.url}}"></app-ability-name>
          <span *ngIf="ability.is_hidden" style="font-size:0.75rem">
            <br> Hidden
          </span>
        </div>
        <div class="info-box-content-item" (click)="goAbility(ability.ability)" *ngIf="pokemon.abilities | slot:2; let ability">
          <app-ability-name url="{{ability.ability.url}}"></app-ability-name>
          <span *ngIf="ability.is_hidden" style="font-size:0.75rem">
            <br> Hidden
          </span>
        </div>
        <div class="info-box-content-item" (click)="goAbility(ability.ability)" *ngIf="pokemon.abilities | slot:3; let ability">
          <app-ability-name url="{{ability.ability.url}}"></app-ability-name>
          <span *ngIf="ability.is_hidden" style="font-size:0.75rem">
            <br> Hidden
          </span>
        </div>
      </div>
    </div>

    <div class="info-box">
      <div class="info-box-title">Egg Groups</div>
      <div class="info-box-content">
        <div class="info-box-content-item" *ngIf="species.egg_groups[0]">
            {{species.egg_groups[0].name}}
        </div>
        <div class="info-box-content-item" *ngIf="species.egg_groups[1]">
            {{species.egg_groups[1].name}}
        </div>
      </div>
    </div>

    <div class="info-box">
      <div class="info-box-title">Capture Rate</div>
      <div class="info-box-content info-box-content-item">{{species.capture_rate}}</div>
    </div>

    <div class="info-box">
      <div class="info-box-title">Gender Rate</div>
      <div class="info-box-content info-box-content-item">{{species.gender_rate}}</div>
    </div>

    <div class="info-box">
      <div class="info-box-title">Height</div>
      <div class="info-box-content info-box-content-item">{{pokemon.height}}</div>
    </div>

    <div class="info-box">
      <div class="info-box-title">Weight</div>
      <div class="info-box-content info-box-content-item">{{pokemon.weight}}</div>
    </div>
  </div>

  <div class="page-section">
    <h4 class="card-title text-center">Base Stats</h4>
    <div class="stats-list">
      <!-- HP -->
      <div class="stats-item" *ngIf="pokemon.stats | stats:'hp'; let hp">
        <div class="stats-header">HP</div>
        <div class="stats-value">{{hp}}</div>
        <div class="stats-bar bgl-hp" [style.width.px]="200">
          <div class="stats-bar bgd-hp" [style.width.px]="hp"></div>
        </div>
      </div>
      <!-- Attack -->
      <div class="stats-item" *ngIf="pokemon.stats | stats:'attack'; let attack">
        <div class="stats-header">ATK</div>
        <div class="stats-value">{{attack}}</div>
        <div class="stats-bar bgl-attack" [style.width.px]="200">
          <div class="stats-bar bgd-attack" [style.width.px]="attack"></div>
        </div>
      </div>
      <!-- Defense -->
      <div class="stats-item" *ngIf="pokemon.stats | stats:'defense'; let defense">
        <div class="stats-header">DEF</div>
        <div class="stats-value">{{defense}}</div>
        <div class="stats-bar bgl-defense" [style.width.px]="200">
          <div class="stats-bar bgd-defense" [style.width.px]="defense"></div>
        </div>
      </div>
      <!-- Special Attack -->
      <div class="stats-item" *ngIf="pokemon.stats | stats:'special-attack'; let specialAttack">
        <div class="stats-header">SPA</div>
        <div class="stats-value">{{specialAttack}}</div>
        <div class="stats-bar bgl-special-attack" [style.width.px]="200">
          <div class="stats-bar bgd-special-attack" [style.width.px]="specialAttack"></div>
        </div>
      </div>
      <!-- Special Defense -->
      <div class="stats-item" *ngIf="pokemon.stats | stats:'special-defense'; let specialDefense">
        <div class="stats-header">SPD</div>
        <div class="stats-value">{{specialDefense}}</div>
        <div class="stats-bar bgl-special-defense" [style.width.px]="200">
          <div class="stats-bar bgd-special-defense" [style.width.px]="specialDefense"></div>
        </div>
      </div>
      <!-- Speed -->
      <div class="stats-item" *ngIf="pokemon.stats | stats:'speed'; let speed">
        <div class="stats-header">SPD</div>
        <div class="stats-value">{{speed}}</div>
        <div class="stats-bar bgl-speed" [style.width.px]="200">
          <div class="stats-bar bgd-speed" [style.width.px]="speed"></div>
        </div>
      </div>
    </div>
    <!-- Total -->
    <div class="stats-item">
      <div class="stats-header">Total</div>
      <div class="stats-value">{{getTotalStats()}}</div>
    </div>
  </div>

  <app-evolution-chain url='{{species.evolution_chain.url}}'>
  </app-evolution-chain>

  <div class="page-section">
    <h4 class="card-title text-center">PokeDex Entry</h4>
    <div>{{(species.flavor_text_entries | language | version)[0].flavor_text}}</div>
  </div>

  <div class="page-section">
    <h4 class="card-title text-center">Moves</h4>
    <table class="table">
      <th>Level Up</th>
      <tr *ngFor="let move of pokemon.moves">
        <app-move-list-item
          *ngIf="(move.version_group_details | versionGroup | moveLearnMethod:'level-up').length !== 0"
          url='{{move.move.url}}'>
        </app-move-list-item>
      </tr>
    </table>

    <table class="table">
      <th>TM/HM</th>
      <tr *ngFor="let move of pokemon.moves">
        <app-move-list-item
          *ngIf="(move.version_group_details | versionGroup | moveLearnMethod:'machine').length !== 0"
          url='{{move.move.url}}'>
        </app-move-list-item>
      </tr>
    </table>
  </div>
</div>
